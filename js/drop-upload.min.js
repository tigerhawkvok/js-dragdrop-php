(function(){var e,r,t,o,n,a,s,i,u,c,l,p,d,h,m,f,g,w,b,y,v,P,x,T,j=[].slice;window.locationData={},locationData.params={enableHighAccuracy:!0},locationData.last=void 0,window.debounce_timer=null,l=function(e){return!e||0===e.length},c=function(e){return!e||/^\s*$/.test(e)},p=function(e){try{if((l(e)||c(e)||null==e)&&!1!==e&&0!==e)return!0}catch(e){return e,!1}return!1},d=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},P=function(e){return!d(e)||p(e)?0:parseInt(e)},String.prototype.toBool=function(){return""+this=="true"},Boolean.prototype.toBool=function(){return""+this=="true"},Number.prototype.toBool=function(){return""+this=="1"},String.prototype.addSlashes=function(){return this.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},Object.size=function(e){var r,t,o;if("object"!=typeof e)try{return e.length}catch(e){r=e,console.error("Passed argument isn't an object and doesn't have a .length parameter"),console.warn(r.message)}o=0;for(t in e)e.hasOwnProperty(t)&&o++;return o},a=function(e,r){return setTimeout(r,e)},v=function(e,r){var t;return null==r&&(r=0),t=Math.pow(10,r),Math.round(e*t)/t},s=function(e){try{return Base64.encode(e)}catch(r){return r,console.warn("Bad encode string provided"),e}},jQuery.fn.exists=function(){return jQuery(this).length>0},jQuery.fn.isVisible=function(){return jQuery(this).is(":visible")&&"hidden"!==jQuery(this).css("visibility")},jQuery.fn.hasChildren=function(){return Object.size(jQuery(this).children())>3},function(e){}(),x=function(e){var r,t,o;o={};for(t in e)void 0!==(r=e[t])&&(o[t]=r);return o},m=function(e,r,t){var o,n,a,s;if(null==r&&(r={}),null==t&&(t=!0),$("script[src='"+e+"']").exists()){if("function"==typeof r)try{r()}catch(e){o=e,console.error("Script is already loaded, but there was an error executing the callback function - "+o.message)}return!0}return(s=document.createElement("script")).setAttribute("src",e),s.setAttribute("async","async"),s.setAttribute("type","text/javascript"),s.src=e,s.async=!0,a=function(){var e;e=s.readyState;try{if(!r.done&&(!e||/loaded|complete/.test(e))&&(r.done=!0,"function"==typeof r))try{return r()}catch(e){return o=e,console.error("Postload callback error - "+o.message)}}catch(e){return o=e,console.error("Onload error - "+o.message)}},n=function(){console.warn("There may have been a problem loading "+e);try{if(!r.done&&(r.done=!0,"function"==typeof r&&t))try{return r()}catch(e){return o=e,console.error("Post error callback error - "+o.message)}}catch(e){return o=e,console.error("There was an error in the error handler! "+o.message)}},s.setAttribute("onload",a),s.setAttribute("onreadystate",a),s.setAttribute("onerror",n),s.onload=s.onreadystate=a,s.onerror=n,document.getElementsByTagName("head")[0].appendChild(s),!0},window.loadJS=m,String.prototype.toTitleCase=function(){var e,r,t,o,n,a,s,i,u;for(a=this.replace(/([^\W_]+[^\s-]*) */g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),n=["A","An","The","And","But","Or","For","Nor","As","At","By","For","From","In","Into","Near","Of","On","Onto","To","With"],e=0,21;e<21;e++)t=n[e],o=RegExp("\\s"+t+"\\s","g"),a=a.replace(o,function(e){return e.toLowerCase()});for(u=["Id","Tv"],r=0,2;r<2;r++)s=u[r],i=RegExp("\\b"+s+"\\b","g"),a=a.replace(i,s.toUpperCase());return a},h=function(){var e,r,t,o,n;null==(null!=(t=window.core)?t.functionMap:void 0)&&(null==window.core&&(window.core={}),core.functionMap={});try{o=[];for(r in window){n=window[r];try{if("function"!=typeof n)continue;try{e=md5(""+n),o.push(core.functionMap[e]=r)}catch(e){}}catch(e){}}return o}catch(e){}},"function"!=typeof Function.prototype.getName&&(Function.prototype.getName=function(){var e,r,t;if(null==(null!=(t=window.core)?t.functionMap:void 0)&&(null==window.core&&(window.core={}),core.functionMap={}),null==(r=this.name)&&(r=(""+this).substr(0,(""+this).indexOf("(")).replace("function ","")),p(r)){r=md5(""+this);try{if("object"!=typeof core.functionMap)try{h()}catch(e){}"object"==typeof core.functionMap&&(e=core.functionMap[r],p(e)||(r=e))}catch(e){}}return r}),"function"!=typeof Function.prototype.debounce&&(Function.prototype.debounce=function(){var e,r,t,o,n,s,i,u;i=arguments[0],t=arguments[1],u=arguments[2],e=4<=arguments.length?j.call(arguments,3):[],null==i&&(i=300),null==t&&(t=!1),null==u&&(u=window.debounce_timer),null==(null!=(s=window.core)?s.debouncers:void 0)&&(null==window.core&&(window.core={}),core.debouncers={});try{n=this.getName()}catch(e){}o=this,r=function(){if(!t)return o.apply(o,e)};try{null!=core.debouncers[n]&&(u=core.debouncers[n])}catch(e){}if(null!=u)try{clearTimeout(u)}catch(e){e}return t?(o.apply(obj,e),console.log("Executed "+n+" immediately"),!1):null!=n?core.debouncers[n]=a(i,function(){return r()}):window.debounce_timer=a(i,function(){return r()})}),T=function(e,r,t,o){var n,a;return null==r&&(r="warning"),null==t&&(t="body"),null==o&&(o="#status-message"),$(o).exists()||(n='<div class="alert alert-'+r+' alert-dismissable" role="alert" id="'+o.slice(1)+'">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n    <div class="alert-message"></div>\n</div>',a=$("main").exists()?"main":$("article").exists()?"article":t,$(a).prepend(n)),$(o+" .alert-message").html(e)},window.toastStatusMessage=T,g=function(e){return null!=e&&(window.open(e),!1)},w=function(e){return g(e)},i=function(e){return null!=e&&(window.location.href=e,!1)},f=function(e){return null==e&&(e=!0),$(".newwindow").each(function(){var r,t;return null==(r=$(this).attr("href"))&&(r=$(this).attr("data-href")),t=function(e){return null!=e&&(window.open(e),!1)},$(this).click(function(o){return e&&(o.preventDefault(),o.stopPropagation()),t(r)}),$(this).keypress(function(){return t(r)})})},window.mapNewWindows=f,n=function(e){try{if(!$("html /deep/ "+e).exists())throw"Bad /deep/ selector";return $("html /deep/ "+e)}catch(r){r;try{if(!$("html >>> "+e).exists())throw"Bad >>> selector";return $("html >>> "+e)}catch(r){return r,$(e)}}},o=function(e){return n(e)},t=function(e){return null==e&&(e=".click"),$(e).each(function(){var e,r,t;try{if(t=$(this).attr("data-href"),!p(t)){$(this).unbind();try{t===uri.o.attr("path")&&"paper-tab"===$(this).prop("tagName").toLowerCase()&&$(this).parent().prop("selected",$(this).index())}catch(e){r=e,console.warn("tagname lower case error")}return $(this).click(function(){return $(this).attr("newTab").toBool()||$(this).attr("newtab").toBool()?w(t):i(t)}),t}if(null!=(e=$(this).attr("data-function")))return $(this).unbind(),$(this).click(function(){try{return console.log("Executing bound function "+e+"()"),window[e]()}catch(t){return r=t,console.error("'"+e+"()' is a bad function - "+r.message)}})}catch(e){return r=e,console.error("There was a problem binding to #"+$(this).attr("id")+" - "+r.message)}}),!1},r=function(){return $('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},e=function(){return $("#imagelightbox-loading").remove(),$("#imagelightbox-overlay").click(function(){return $("#imagelightbox").click()})},y=function(){return $('<div id="imagelightbox-overlay"></div>').appendTo("body")},b=function(){return $("#imagelightbox-overlay").remove()},window.locationData={},locationData.params={enableHighAccuracy:!0},locationData.last=void 0,$(function(){return t(),window.bindClicks=t,window.mapNewWindows=f}),null==window.dropperParams&&(window.dropperParams={}),null==dropperParams.metaPath&&(dropperParams.metaPath=""),null==dropperParams.uploadPath&&(dropperParams.uploadPath="uploaded_images/"),null==dropperParams.dependencyPath&&(dropperParams.dependencyPath="bower_components/"),null==dropperParams.thumbWidth&&(dropperParams.thumbWidth=640),null==dropperParams.thumbHeight&&(dropperParams.thumbHeight=480),null==dropperParams.showProgress&&(dropperParams.showProgress=!0),null==dropperParams.clickTargets&&(dropperParams.clickTargets=!1),null==dropperParams.mimeTypes&&(dropperParams.mimeTypes="image/*,video/mp4,video/3gpp,audio/*"),u=function(e,r){return null==e&&(e="#upload-image"),dropperParams.dropzonePath=dropperParams.metaPath+"js/dropzone-custom.min.js",dropperParams.bootstrapPath=dropperParams.dependencyPath+"bootstrap/dist/js/bootstrap.min.js","function"!=typeof r&&(r=function(e,r){var t;if("object"!=typeof r)return console.error("Dropzone returned an error - "+r),dropperParams.toastStatusMessage("<strong>Error</strong> There was a problem with the server handling your image. Please try again.","danger","main"),!1;if(!0!==r.status)return null==r.human_error&&(r.human_error="There was a problem uploading your image."),dropperParams.toastStatusMessage("<strong>Error</strong> "+r.human_error,"danger","main"),console.error("Error uploading!",r),!1;try{console.info("Server returned the following result:",r),console.info("The script returned the following file information:",e),dropperParams.dropzone.removeAllFiles(),dropperParams.toastStatusMessage("Upload complete","success","main")}catch(e){t=e,console.error("There was a problem with upload post-processing - "+t.message),console.warn("Using",fileName,r),dropperParams.toastStatusMessage("<strong>Error</strong> Your upload completed, but we couldn't post-process it.","danger","main")}return!1}),m(dropperParams.bootstrapPath),m(dropperParams.dropzonePath,function(){var t,n,a,s,i,u,c,l;(t=document.createElement("link")).setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",dropperParams.metaPath+"css/main.min.css"),document.getElementsByTagName("head")[0].appendChild(t),Dropzone.autoDiscover=!1,a=null!=(l=dropperParams.uploadText)?l:"Drop your file here to upload",s=function(){return o(e).css("box-shadow","").css("border",""),o(e+" .dz-message span").text(a)},n=function(r){o(e+" + .image-upload-progress").remove(),o("#do-upload-image").css("top","").css("position","");try{return r.removeAllFiles()}catch(e){}},i={url:dropperParams.metaPath+"meta.php?do=upload_file&uploadpath="+dropperParams.uploadPath+"&thumb_width="+dropperParams.thumbWidth+"&thumb_height="+dropperParams.thumbHeight,acceptedFiles:dropperParams.mimeTypes,autoProcessQueue:!0,maxFiles:1,dictDefaultMessage:a,clickable:dropperParams.clickTargets,init:function(){return this.on("error",function(e){return function(r,t){return dropperParams.toastStatusMessage("An error occured sending your file to the server - "+t,"danger","main"),console.error("Got the following file details back:",r),n(e)}}(this)),this.on("canceled",function(e){return function(){return dropperParams.toastStatusMessage("Upload canceled.","info","main"),n(e)}}(this)),this.on("dragover",function(){return o(e+" .dz-message span").text(a),o(e).css("box-shadow","0px 0px 15px rgba(15,157,88,.8)").css("border","1px solid #0F9D58")}),this.on("dragleave",function(){return s()}),this.on("dragend",function(){return s()}),this.on("drop",function(){return s()}),this.on("uploadprogress",function(r,t,n){var a,s,i;if(!0===dropperParams.showProgress)return(i=o(e+" + .image-upload-progress")).exists()||(s='<div class="image-upload-progress">\n  <div class="progress">\n    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="min-width:2em;">\n      <span class="upload-percent">0</span>%<span class="sr-only"> Complete</span>\n    </div>\n  </div>\n  <p class="text-center text-muted"><span class="bytes-done">0</span>/<span class="bytes-total">0</span> bytes</p>\n</div>',o(e).after(s),i=o(e+" + .image-upload-progress"),a=$(".image-upload-progress").outerHeight()+$("#profile_new_message").height()+$("#do-upload-image").outerHeight(),$("#do-upload-image").css("top","-"+a+"px!important").css("position","relative!important")),t=P(t),i.find(".progress-bar").attr("aria-valuenow",t).css("width",t+"%"),i.find(".upload-percent").text(t),i.find(".bytes-done").text(n),i.find(".bytes-total").text(r.size)}),this.on("success",function(e){return function(t,o){return n(e),r(t,o)}}(this))}},o(e).hasClass("dropzone")||o(e).addClass("dropzone");try{c=new Dropzone(o(e).get(0),i)}catch(e){u=e,console.warn("Warning! The drop target may be misconfigured. Dropzone said '"+u.message+"'"),dropperParams.config=i,console.info("Your dropzone configuration has been saved in dropperParams.config")}return dropperParams.dropzone=c}),!1},dropperParams.handleDragDropImage=u}).call(this);
//# sourceMappingURL=maps/drop-upload.map